<!DOCTYPE html>
<html>

<head>
  <title>7-11 store</title>
  <link href="/stylesheets/bootstrap.min.css" rel="stylesheet" media="screen">
  <script src="/javascripts/jquery-2.1.1.min.js" type="text/javascript"></script>
  <script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>
</head>

<body>
  <h1>购物中心</h1>
  <div>
    <p>Welcome </p>
    <p>it is a supermarket</p>
  </div>
  <div>
    用户名: <input type="text" id='username' />
  </div>
  <div>
    密码: <input type="password" id='password' />
  </div>
  <button type="button" onclick="login();">登陆</button>
  <button type="button" onclick="register();">注册</button>
<script type="text/javascript">
  function login() {
    var user = {};
    user.username = $('#username').val();
    user.password = $('#password').val();
    if (!(user.username.trim()) || !(user.password.trim())) {
      alert('用户名和密码都不能为空');
      return;
    }
    $.ajax({
      url: '/login',
      type: 'POST',
      data: user,
      success: function(data, status) {
        localStorage.setItem('user', JSON.stringify(user));
        if (status == 'success') {
          location.href = 'home';
        }
      },
      error: function(data, status) {
        if (status == "error") {
          alert('用户名或者密码有误');
        }
      }
    });
  }

  function register() {
    location.href = 'register';
  }
</script>
</body>
</html>